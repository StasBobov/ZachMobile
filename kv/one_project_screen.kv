#:import projects projects

<ProjectPopup@Popup>
    auto_dismiss: False
    size_hint: 0.4, 0.4
    pos_hint: {"x": 0.2, "top": 0.9}
    title: 'Close without saving'
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Exit without saving?"
            font_size: 12
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: 'Do not save'
                font_size: 12
                size_hint: .3, .5
                on_release:
                    root.dismiss()
                    print('Back to a previous screen')
            Button:
                text: 'Stay'
                font_size: 12
                size_hint: .3, .5
                on_release:
                    root.dismiss()

<OneProjectScreen>:
    FloatLayout:
        canvas:
            Color:
                rgb: utils.get_color_from_hex("#3983F2")
            Rectangle:
                size: self.size
                pos: self.pos
        ImageButton:
            size_hint: .2, .15
            pos_hint: {"top": 1, "right": .25}
            source: "icons/back.png"
            on_release:
                Factory.MyPopup().open()

        ScrollView:
            pos_hint: {"top": .85, "right": 1}
            size_hint: 1, .65
            GridLayout:
                id: one_project_layout
                name: "one_project_layout"
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                row_default_height: '100dp'
                row_fource_default: True
                canvas:
                    Color:
                        rgb: utils.get_color_from_hex("#A9A9A9")
                    Rectangle:
                        size: self.size
                        pos: self.pos
                TextInput:
                    id: title
                    name: "title"
                    hint_text: 'title'
                    multiline: False
                    size_hint: .8, .1
                    pos_hint: {'top': 1, 'right': .9}
                TextInput:
                    id: description
                    name: "description"
                    hint_text: 'description'
                    size_hint: .8, .2
                    pos_hint: {'top': .85, 'right': .9}
        BoxLayout:
            pos_hint: {"top": .2, "right": 1}
            size_hint: 1, .2
            orientation: "vertical"
            Label:
                id: info_label
                name: "info_label"
                size_hint: 1, 1
                pos_hint: {'top': 1, 'right': .9}
            BoxLayout:
                orientation: "horizontal"
                ImageButton:
                    size_hint: 1, 1
                    pos_hint: {"top": 1, "right": .5}
                    source: "icons/add_field.png"
                    on_release:
                        projects.Project.add_field(projects.Project.operating_project)
                ImageButton:
                    size_hint: 1, 1
                    pos_hint: {"top": 1, "right": .5}
                    source: "icons/add_file.png"
                    on_release:
                        print('add file')
                ImageButton:
                    size_hint: 1, 1
                    pos_hint: {"top": 1, "right": .5}
                    source: "icons/save.png"
                    on_release:
                        projects.Project.save_project(projects.Project.operating_project)
